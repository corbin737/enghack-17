{% extends "base.html" %}
{% block content %}
    <div class="page-header">
        <h1>Sent Messages</h1>
    </div>
    {% if messages %}
        {% for message in messages %}
        <div class="panel panel-default">
            <div class="panel-heading">
                <strong>To: {{ message.recipient }}</strong>
            </div>
            <div class="panel-body">
                {{ message.message }}
            </div>
            <div class="panel-footer">
                {% if message.delivered %}
                    Message delivered!
                {% else %}
                    Pending delivery...
                {% endif %}
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>You haven't sent any messages.</p>
    {% endif %}

    <div class="page-header">
        <h1>New Message</h1>
    </div>
    <form action="" method="post" name="login">
        {{ form.hidden_tag() }}
        <div class="form-group">
            <label for="recipient">Email</label>
            {{ form.recipient(size=80, class_='form-control', type='email') }}
            {% for error in form.recipient.errors %}
                <span class="help-block" style="color: red;">{{ error }}</span>
            {% endfor %}
        </div>
        <div class="form-group">
            <label for="message">Message</label>
            {{ form.message(rows=10, cols=80, class_='form-control') }}
            {% for error in form.message.errors %}
                <span class="help-block" style="color: red;">{{ error }}</span>
            {% endfor %}
        </div>
        <button type="submit" class="btn btn-primary pull-right">Send</button>
    </form>
{% endblock %}
